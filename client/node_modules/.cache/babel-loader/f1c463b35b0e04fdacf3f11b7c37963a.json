{"ast":null,"code":"var _jsxFileName = \"/Users/vv/Projects/bitbustracker/ES_2020_2021/client/src/Map/Map.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst {\n  compose,\n  withProps,\n  withStateHandlers\n} = require('recompose');\n\nconst {\n  withScriptjs,\n  withGoogleMap,\n  GoogleMap,\n  Marker,\n  DirectionsRenderer\n} = require('react-google-maps');\n\nconst {\n  InfoBox\n} = require('react-google-maps/lib/components/addons/InfoBox');\n\nfunction MapDirectionsRenderer(props) {\n  _s();\n\n  const [directions, setDirections] = useState(null);\n  const [error, setError] = useState(null);\n  const [currentPosition, setCurrentPosition] = useState({});\n\n  const success = position => {\n    const currentPosition = {\n      lat: position.coords.latitude,\n      lng: position.coords.longitude\n    };\n    setCurrentPosition(currentPosition);\n  };\n\n  useEffect(() => {\n    const {\n      places,\n      travelMode\n    } = props;\n    navigator.geolocation.getCurrentPosition(success);\n    const waypoints = [];\n    places.forEach(p => {\n      waypoints.push({\n        location: {\n          lat: p.latitude,\n          lng: p.longitude\n        },\n        stopover: true\n      });\n    });\n    const origin = waypoints.shift().location;\n    const destination = waypoints.pop().location;\n    const directionsService = new google.maps.DirectionsService();\n    directionsService.route({\n      origin: origin,\n      destination: destination,\n      travelMode: travelMode,\n      waypoints: waypoints\n    }, (result, status) => {\n      console.log(result);\n\n      if (status === google.maps.DirectionsStatus.OK) {\n        setDirections(result);\n      } else {\n        setError(result);\n      }\n    });\n  });\n  console.log(currentPosition);\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: error === null || error === void 0 ? void 0 : error.status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 12\n    }, this);\n  }\n\n  return directions && /*#__PURE__*/_jsxDEV(DirectionsRenderer, {\n    directions: directions\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 24\n  }, this);\n}\n\n_s(MapDirectionsRenderer, \"3JlmmTTm/GtuVVXfxgdQGNmMhIc=\");\n\n_c = MapDirectionsRenderer;\nconst Map = compose(withProps({\n  googleMapURL: `https://maps.googleapis.com/maps/api/js?key=${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}&v=3.exp&libraries=geometry,drawing,places`,\n  loadingElement: /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: `100%`\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 21\n  }, this),\n  containerElement: /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: `400px`\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 23\n  }, this),\n  mapElement: /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: `100%`\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 17\n  }, this),\n  center: currentPosition\n}), withStateHandlers(() => ({\n  isOpen: false\n}), {\n  onToggleOpen: isOpen => () => ({\n    isOpen: !isOpen\n  })\n}), withScriptjs, withGoogleMap)(props => /*#__PURE__*/_jsxDEV(GoogleMap, {\n  defaultZoom: 12,\n  defaultCenter: props.center,\n  props: true,\n  children: /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [props.markers.map((marker, index) => /*#__PURE__*/_jsxDEV(Marker, {\n      position: {\n        lat: marker.latitude,\n        lng: marker.longitude\n      }\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(MapDirectionsRenderer, {\n      places: props.markers,\n      travelMode: google.maps.TravelMode.DRIVING\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 94,\n  columnNumber: 5\n}, this));\nexport { Map };\n\nvar _c;\n\n$RefreshReg$(_c, \"MapDirectionsRenderer\");","map":{"version":3,"sources":["/Users/vv/Projects/bitbustracker/ES_2020_2021/client/src/Map/Map.tsx"],"names":["React","useState","useEffect","compose","withProps","withStateHandlers","require","withScriptjs","withGoogleMap","GoogleMap","Marker","DirectionsRenderer","InfoBox","MapDirectionsRenderer","props","directions","setDirections","error","setError","currentPosition","setCurrentPosition","success","position","lat","coords","latitude","lng","longitude","places","travelMode","navigator","geolocation","getCurrentPosition","waypoints","forEach","p","push","location","stopover","origin","shift","destination","pop","directionsService","google","maps","DirectionsService","route","result","status","console","log","DirectionsStatus","OK","Map","googleMapURL","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","loadingElement","height","containerElement","mapElement","center","isOpen","onToggleOpen","markers","map","marker","index","TravelMode","DRIVING"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nconst { compose, withProps, withStateHandlers } = require('recompose');\nconst {\n  withScriptjs,\n  withGoogleMap,\n  GoogleMap,\n  Marker,\n  DirectionsRenderer,\n} = require('react-google-maps');\nconst { InfoBox } = require('react-google-maps/lib/components/addons/InfoBox');\n\nfunction MapDirectionsRenderer(props: { places: any; travelMode: any }) {\n  const [directions, setDirections] = useState(null);\n  const [error, setError] = useState<any>(null);\n\n  const [currentPosition, setCurrentPosition] = useState<any>({});\n\n  const success = (position: any) => {\n    const currentPosition = {\n      lat: position.coords.latitude,\n      lng: position.coords.longitude,\n    };\n    setCurrentPosition(currentPosition);\n  };\n\n  useEffect(() => {\n    const { places, travelMode } = props;\n    navigator.geolocation.getCurrentPosition(success);\n    const waypoints: any[] = [];\n    places.forEach((p: any) => {\n      waypoints.push({\n        location: { lat: p.latitude, lng: p.longitude },\n        stopover: true,\n      });\n    });\n\n    const origin = waypoints.shift().location;\n    const destination = waypoints.pop().location;\n\n    const directionsService = new google.maps.DirectionsService();\n    directionsService.route(\n      {\n        origin: origin,\n        destination: destination,\n        travelMode: travelMode,\n        waypoints: waypoints,\n      },\n      (result: any, status) => {\n        console.log(result);\n        if (status === google.maps.DirectionsStatus.OK) {\n          setDirections(result);\n        } else {\n          setError(result);\n        }\n      }\n    );\n  });\n\n  console.log(currentPosition);\n\n  if (error) {\n    return <h1>{error?.status}</h1>;\n  }\n  return directions && <DirectionsRenderer directions={directions} />;\n}\n\nconst Map = compose(\n  withProps({\n    googleMapURL: `https://maps.googleapis.com/maps/api/js?key=${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}&v=3.exp&libraries=geometry,drawing,places`,\n    loadingElement: <div style={{ height: `100%` }} />,\n    containerElement: <div style={{ height: `400px` }} />,\n    mapElement: <div style={{ height: `100%` }} />,\n    center: currentPosition,\n  }),\n  withStateHandlers(\n    () => ({\n      isOpen: false,\n    }),\n    {\n      onToggleOpen: (isOpen: any) => () => ({\n        isOpen: !isOpen,\n      }),\n    }\n  ),\n  withScriptjs,\n  withGoogleMap\n)(\n  (props: {\n    center: { lat: number; lng: number };\n    onToggleOpen: any;\n    isOpen: any;\n    markers: any;\n  }) => (\n    <GoogleMap defaultZoom={12} defaultCenter={props.center} props>\n      <>\n        {props.markers.map((marker: any, index: number) => (\n          <Marker\n            key={index}\n            position={{ lat: marker.latitude, lng: marker.longitude }}\n          />\n        ))}\n        <MapDirectionsRenderer\n          places={props.markers}\n          travelMode={google.maps.TravelMode.DRIVING}\n        />\n      </>\n    </GoogleMap>\n  )\n);\n\nexport { Map };\n"]},"metadata":{},"sourceType":"module"}