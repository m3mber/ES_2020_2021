{"ast":null,"code":"var _jsxFileName = \"/Users/vv/Projects/bitbustracker/client/src/Map/Map.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst {\n  compose,\n  withProps,\n  withStateHandlers\n} = require('recompose');\n\nconst {\n  withScriptjs,\n  withGoogleMap,\n  GoogleMap,\n  Marker,\n  DirectionsRenderer\n} = require('react-google-maps');\n\nconst {\n  InfoBox\n} = require('react-google-maps/lib/components/addons/InfoBox');\n\nconst places = [{\n  latitude: 25.8103146,\n  longitude: -80.1751609\n}, {\n  latitude: 27.9947147,\n  longitude: -82.5943645\n}, {\n  latitude: 28.4813018,\n  longitude: -81.4387899\n}];\n\nfunction MapDirectionsRenderer(props) {\n  _s();\n\n  const [directions, setDirections] = useState(null);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const {\n      places,\n      travelMode\n    } = props;\n    console.log(places);\n    const waypoints = [];\n    places.forEach(p => {\n      waypoints.push({\n        location: {\n          lat: p.latitude,\n          lng: p.longitude\n        },\n        stopover: true\n      });\n    });\n    console.log(waypoints);\n    const origin = waypoints.shift().location;\n    const destination = waypoints.pop().location;\n    console.log('origin ' + origin);\n    console.log('destination ' + destination);\n    const directionsService = new google.maps.DirectionsService();\n    directionsService.route({\n      origin: origin,\n      destination: destination,\n      travelMode: travelMode,\n      waypoints: waypoints\n    }, (result, status) => {\n      console.log(result);\n\n      if (status === google.maps.DirectionsStatus.OK) {\n        setDirections(result);\n      } else {\n        setError(result);\n      }\n    });\n  });\n\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 12\n    }, this);\n  }\n\n  return directions && /*#__PURE__*/_jsxDEV(DirectionsRenderer, {\n    directions: directions\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 24\n  }, this);\n}\n\n_s(MapDirectionsRenderer, \"EbZ3rf2k47q8bOIBnVG92TiLXsw=\");\n\n_c = MapDirectionsRenderer;\nconst Map = compose(withProps({\n  googleMapURL: `https://maps.googleapis.com/maps/api/js?key=${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}&v=3.exp&libraries=geometry,drawing,places`,\n  loadingElement: /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: `100%`\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 21\n  }, this),\n  containerElement: /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: `400px`\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 23\n  }, this),\n  mapElement: /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: `100%`\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 17\n  }, this),\n  center: {\n    lat: 41.14961,\n    lng: -8.61099\n  }\n}), withStateHandlers(() => ({\n  isOpen: false\n}), {\n  onToggleOpen: isOpen => () => ({\n    isOpen: !isOpen\n  })\n}), withScriptjs, withGoogleMap)(props => /*#__PURE__*/_jsxDEV(GoogleMap, {\n  defaultZoom: 12,\n  defaultCenter: props.center,\n  props: true,\n  children: /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [props.markers.map((marker, index) => /*#__PURE__*/_jsxDEV(Marker, {\n      position: {\n        lat: marker.latitude,\n        lng: marker.longitude\n      }\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(MapDirectionsRenderer, {\n      places: props.markers,\n      travelMode: google.maps.TravelMode.DRIVING\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 91,\n  columnNumber: 5\n}, this));\nexport { Map };\n\nvar _c;\n\n$RefreshReg$(_c, \"MapDirectionsRenderer\");","map":{"version":3,"sources":["/Users/vv/Projects/bitbustracker/client/src/Map/Map.tsx"],"names":["React","useState","useEffect","compose","withProps","withStateHandlers","require","withScriptjs","withGoogleMap","GoogleMap","Marker","DirectionsRenderer","InfoBox","places","latitude","longitude","MapDirectionsRenderer","props","directions","setDirections","error","setError","travelMode","console","log","waypoints","forEach","p","push","location","lat","lng","stopover","origin","shift","destination","pop","directionsService","google","maps","DirectionsService","route","result","status","DirectionsStatus","OK","Map","googleMapURL","process","env","REACT_APP_GOOGLE_MAPS_API_KEY","loadingElement","height","containerElement","mapElement","center","isOpen","onToggleOpen","markers","map","marker","index","TravelMode","DRIVING"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nconst { compose, withProps, withStateHandlers } = require('recompose');\nconst {\n  withScriptjs,\n  withGoogleMap,\n  GoogleMap,\n  Marker,\n  DirectionsRenderer,\n} = require('react-google-maps');\nconst { InfoBox } = require('react-google-maps/lib/components/addons/InfoBox');\n\nconst places = [\n  { latitude: 25.8103146, longitude: -80.1751609 },\n  { latitude: 27.9947147, longitude: -82.5943645 },\n  { latitude: 28.4813018, longitude: -81.4387899 },\n];\n\nfunction MapDirectionsRenderer(props: { places: any; travelMode: any }) {\n  const [directions, setDirections] = useState(null);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const { places, travelMode } = props;\n\n    console.log(places);\n    const waypoints: any[] = [];\n    places.forEach((p: any) => {\n      waypoints.push({\n        location: { lat: p.latitude, lng: p.longitude },\n        stopover: true,\n      });\n    });\n    console.log(waypoints);\n    const origin = waypoints.shift().location;\n    const destination = waypoints.pop().location;\n\n    console.log('origin ' + origin);\n    console.log('destination ' + destination);\n    const directionsService = new google.maps.DirectionsService();\n    directionsService.route(\n      {\n        origin: origin,\n        destination: destination,\n        travelMode: travelMode,\n        waypoints: waypoints,\n      },\n      (result: any, status) => {\n        console.log(result);\n        if (status === google.maps.DirectionsStatus.OK) {\n          setDirections(result);\n        } else {\n          setError(result);\n        }\n      }\n    );\n  });\n\n  if (error) {\n    return <h1>{error}</h1>;\n  }\n  return directions && <DirectionsRenderer directions={directions} />;\n}\n\nconst Map = compose(\n  withProps({\n    googleMapURL: `https://maps.googleapis.com/maps/api/js?key=${process.env.REACT_APP_GOOGLE_MAPS_API_KEY}&v=3.exp&libraries=geometry,drawing,places`,\n    loadingElement: <div style={{ height: `100%` }} />,\n    containerElement: <div style={{ height: `400px` }} />,\n    mapElement: <div style={{ height: `100%` }} />,\n    center: { lat: 41.14961, lng: -8.61099 },\n  }),\n  withStateHandlers(\n    () => ({\n      isOpen: false,\n    }),\n    {\n      onToggleOpen: (isOpen: any) => () => ({\n        isOpen: !isOpen,\n      }),\n    }\n  ),\n  withScriptjs,\n  withGoogleMap\n)(\n  (props: {\n    center: { lat: number; lng: number };\n    onToggleOpen: any;\n    isOpen: any;\n    markers: any;\n  }) => (\n    <GoogleMap defaultZoom={12} defaultCenter={props.center} props>\n      <>\n        {props.markers.map((marker: any, index: number) => (\n          <Marker\n            key={index}\n            position={{ lat: marker.latitude, lng: marker.longitude }}\n          />\n        ))}\n        <MapDirectionsRenderer\n          places={props.markers}\n          travelMode={google.maps.TravelMode.DRIVING}\n        />\n      </>\n    </GoogleMap>\n  )\n);\n\nexport { Map };\n"]},"metadata":{},"sourceType":"module"}